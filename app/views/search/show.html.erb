<% provide(:title, 'Search') %>
<%= render partial: 'shared/main_nav' %>

<div class="jumbotron jumbotron-fluid bg-primary p-y-2" style="background-color: #29B6F6 !important">
  <div class="container">
    <%= form_tag search_path, method: :get do %>
    <div class="row">
      <div class="col-md-4">
        <div class="form-group">
          <%= label_tag :gender, "What're you looking for?" %>
          <%= select_tag :gender, options_for_select([["I'm a man looking a woman", 'f'], ["I'm a woman looking for a man", 'm']]), { class: 'form-control' } %>
        </div>

        <div class="form-group">
          <%= label_tag :min_age, "Age" %>
          <div class="row">
            <div class="col-xs-6">
              <%= number_field_tag :min_age, nil, { class: 'form-control', placeholder: 'Min', within: 18..100 } %>
            </div>
            <div class="col-xs-6">
              <%= number_field_tag :max_age, nil, { class: 'form-control', placeholder: 'Max', within: 18..100 } %>
            </div>
          </div>
        </div>

        <div class="form-group">
          <%= label_tag :min_height, "Height" %>
          <div class="row">
            <div class="col-xs-6">
              <%= select_tag :min_height, options_for_select((48..84).map { |height_in_inches| [metric_height(height_in_inches), height_in_inches] }), { class: 'form-control', include_blank: "Min" } %>
            </div>
            <div class="col-xs-6">
              <%= select_tag :min_height, options_for_select((48..84).map { |height_in_inches| [metric_height(height_in_inches), height_in_inches] }), { class: 'form-control', include_blank: "Max" } %>
            </div>
          </div>
        </div>

      </div>
      <div class="col-md-4">
        <div class="form-group">
          <%= label_tag :religion, "Religion" %>
          <%= select_tag :religion, options_for_select(User.religions.map{ |religion, _| [religion.humanize, religion] }), { class: 'form-control', include_blank: "Doesn't matter" } %>
        </div>
      </div>

      <div class="col-md-4">
        <div class="form-group">
          <%= label_tag :language, "Mother tongue" %>

          <% if browser.device.mobile? || browser.device.tablet? %>

            <%= select_tag :language, options_for_select(LanguageList::POPULAR_LANGUAGES.map { |l| [l.common_name || l.name, l.iso_639_3] }), { class: 'form-control', prompt: "Doesn't matter", multiple: true } %>

          <% else %>

            <div class="row scrollable-div">
              <div class="col-xs-6">
                <div class="form-check">
                  <label class="form-check-label">
                    <%= check_box_tag nil, "", false, class: 'form-check-input', data: { toggle: 'languages' } %>
                    Doesn't matter
                  </label>
                </div>
                <% LanguageList::POPULAR_LANGUAGES.map { |l| [l.common_name || l.name, l.iso_639_3] }[0..15].each do |language| %>
                <div class="form-check">
                  <label class="form-check-label">
                    <%= check_box_tag :language, language[1], false, class: 'form-check-input' %>
                    <%= language[0] %>
                  </label>
                </div>
                <% end %>
              </div>
              <div class="col-xs-6">
                <% LanguageList::POPULAR_LANGUAGES.map { |l| [l.common_name || l.name, l.iso_639_3] }[15..-1].each do |language| %>
                <div class="form-check">
                  <label class="form-check-label">
                    <%= check_box_tag :language, language[1], false, class: 'form-check-input' %>
                    <%= language[0] %>
                  </label>
                </div>
                <% end %>
              </div>
            </div>

          <% end %>

        </div>
      </div>

    </div>
    <% end %>
  </div>
</div>
