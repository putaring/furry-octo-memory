<% provide(:title, "Edit details") %>

<%= render partial: 'shared/main_nav' %>
<nav class="bg-primary primary-breadcrumb-container">
  <div class="container">
    <ol class="breadcrumb mb-0">
      <li class="breadcrumb-item"><%= link_to 'My profile', current_user %></li>
      <li class="breadcrumb-item active">Edit details</li>
    </ol>
  </div>
</nav>
<section class="bg-white py-5 mb-3">
  <div class="container">
    <div class="row">
      <div class="col">
        <h1 class="h2">Edit profile details</h1>
      </div>
    </div>
  </div>
</section>

<div class="container mt-4">

  <div class="row">
    <div class="col-md-6 justify-content-center">
      <% if @user.errors.any? %>
        <div class="alert alert-danger">
          <ul class="mb-0">
          <% @user.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
          </ul>
        </div>
      <% end %>

      <% if flash[:notice].present? %>
        <div class="alert alert-info">
          <%= flash.notice %> <%= link_to 'Back to profile', current_user, class: 'alert-link' %>
        </div>
      <% end %>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-6">
      <%= form_for(@user, url: details_path) do |f| %>
        <div class="form-group">
          <%= f.label :username %>
          <%= f.text_field :username, { class: 'form-control', required: true, maxlength: 30, placeholder: 'Create a username'} %>
        </div>
        <%= render partial: 'users/profile_details', locals: { f: f, show_label: true } %>
        <div class="form-group">
          <%= f.submit 'Update', { data: { disable_with: 'Changingâ€¦' }, class: 'btn btn-secondary' } %>
        </div>
      <% end %>
    </div>
  </div>
</div>
